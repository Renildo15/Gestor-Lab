{% extends 'base.html' %}

{% block content %}
<div class='col-8 m-auto pt-2 pb-2 text-center'>
  <h1>Laboratório</h1>
</div>

<div class='col-8 m-auto pt-3 pb-2 text-center'>
 {% if user.is_authenticated %}
 <a href="{% url 'laboratorio:form'%}" class="btn btn-add">Adicionar Laborátorio</a>
 {% endif %}
</div>
{% if page %}
<div class='col-8 m-auto pt-4 pb-2 text-center'>
  <div class="col-9 search-div">
    <form method="GET" id="search-form">
        <input class="form-control" type="text" id="search" name="search" placeholder="Digite o nome do laboratório para buscar..." value="{{ request.GET.search }}">
        <i class="fa fa-search" id="search-btn"></i>
    </form>
  </div>
  <table class="table">
      <thead class="thead-dark">
        <tr>
          {% block th %}
          <th scope="col">Nome</th>
          <th scope="col">Sigla</th>
          <th scope="col">Coordenador</th>
          <th scope="col">Vice-coordenador</th>
          <th scope="col">Descrição</th>
          <th scope="col"></th>
          {% endblock th %}
        </tr>
      </thead>
      <tbody>
          {% for dbs in page %}
              <tr>
                  {% block linhas %}
                  <td>{{dbs.nome}}</td>
                  <td>{{dbs.sigla}}</td>
                  <td>{{dbs.coordenador}}</td>
                  <td>{{dbs.vice_coordenador}}</td>
                  <td>{{dbs.descricao}}</td>
                  {% if user.is_authenticated %}
                  <td>
                    <a href="{% url 'laboratorio:view' dbs.id %}" class="btn btn-view">Visualizar</a>
                    <a href="{% url 'laboratorio:edit' dbs.id %}" class="btn btn-edit">Editar</a>
                    <a href="{% url 'laboratorio:delete' dbs.id %}" class="btn btn-delete">Deletar</a>
                  </td>
                  {% else%}
                  <td></td>
                  {% endif %}
                  {% endblock linhas %}
              </tr>
          {% endfor %}
      </tbody>
  </table>
  <div class="page-links">
    {% if page.has_previous %}
      <a href="{% url 'laboratorio:home' %}?page={{page.previous_page_number}}">Anterior</a>
    {% endif %}
    {% if page.has_next %}
      <a href="{% url 'laboratorio:home' %}?page={{page.next_page_number}}">Próximo</a>
    {% endif %}
  </div>
</div>
{% else %}
<div class='col-8 m-auto pt-4 pb-2 text-center'>
  <div class="col-9 search-div">
    <form method="GET" id="search-form">
        <input class="form-control" type="text" id="search" name="search" placeholder="Digite o nome do laboratório para buscar..." value="{{ request.GET.search }}">
        <i class="fa fa-search" id="search-btn"></i>
    </form>
  </div>
  <h1 class ='text-center mt-5'>
    Não há laboratorios cadastrados
  </h1>
</div>
{% endif %}
{% endblock content %}